<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ì–´íœ˜ í•™ìŠµ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation; /* Disable double-tap zoom on mobile */
        }
        .quiz-option.selected {
            transform: scale(1.05);
            background-color: #60a5fa; /* blue-400 */
            color: white;
            border-color: #3b82f6; /* blue-600 */
        }
        .feedback-correct {
            animation: correct-pulse 0.5s ease;
        }
        .feedback-incorrect {
            animation: incorrect-shake 0.5s ease;
        }
        @keyframes correct-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        .blank-space {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid #9ca3af; /* gray-400 */
            text-align: center;
            padding: 2px 12px;
            font-weight: 700;
            color: #3b82f6; /* blue-600 */
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">

    <div id="app-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all">

        <!-- Start Screen -->
        <div id="start-screen">
            <h1 class="text-3xl font-bold text-center text-slate-800 mb-2">í•œêµ­ì–´ ì–´íœ˜ í€´ì¦ˆ</h1>
            <p class="text-center text-slate-500 mb-8">ë³µìŠµí•  ê³¼ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
            <div class="space-y-4">
                <button onclick="startQuiz(7)" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    7ê³¼: ë‚ ì”¨ì™€ ê³„ì ˆ
                </button>
                <button onclick="startQuiz(8)" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    8ê³¼: í™œë™ê³¼ ìš´ë™
                </button>
                 <button onclick="startQuiz('all')" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    7ê³¼ + 8ê³¼ ëª¨ë‘
                </button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 id="quiz-title" class="text-2xl font-bold text-slate-700"></h2>
                <div id="progress" class="text-lg font-semibold text-slate-500"></div>
            </div>

            <div class="bg-slate-50 p-6 rounded-lg mb-6 min-h-[100px] flex items-center justify-center">
                <p id="sentence" class="text-2xl md:text-3xl text-center leading-relaxed font-medium text-slate-800"></p>
            </div>

            <div id="options" class="grid grid-cols-2 gap-4">
                <!-- Options will be dynamically inserted here -->
            </div>
            
            <div id="feedback" class="mt-6 text-center text-xl font-bold h-8"></div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-slate-800 mb-4">í€´ì¦ˆ ì™„ë£Œ!</h2>
            <div class="bg-blue-50 p-6 rounded-lg mb-6">
                <p class="text-lg text-slate-600">ìµœì¢… ì ìˆ˜</p>
                <p id="score" class="text-6xl font-bold text-blue-500 my-2"></p>
            </div>
            <button onclick="restartApp()" class="w-full bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <script>
        // --- Data ---
        const vocabulary = {
            7: [
                { korean: "ëˆˆì´ ì˜¤ë‹¤", english: "to snow", sentence: "í•˜ëŠ˜ì—ì„œ í•˜ì–€ {blank}." },
                { korean: "ì¶¥ë‹¤", english: "cold", sentence: "ê²¨ìš¸ì€ ë‚ ì”¨ê°€ {blank}." },
                { korean: "ë¥ë‹¤", english: "hot", sentence: "ì—¬ë¦„ì€ ë„ˆë¬´ {blank}." },
                { korean: "ë§‘ë‹¤", english: "clear/sunny", sentence: "ì˜¤ëŠ˜ì€ í•˜ëŠ˜ì´ ì•„ì£¼ {blank}." },
                { korean: "ë¹„ê°€ ì˜¤ë‹¤", english: "to rain", sentence: "ìš°ì‚°ì„ ì±™ê¸°ì„¸ìš”. ë°–ì— {blank}." },
                { korean: "ì‹œì›í•˜ë‹¤", english: "cool", sentence: "ê°€ì„ ë°”ëŒì€ ì •ë§ {blank}." },
                { korean: "íë¦¬ë‹¤", english: "cloudy", sentence: "ë‚ ì”¨ê°€ {blank}." },
                { korean: "ë´„", english: "spring", sentence: "ê½ƒì´ í”¼ëŠ” ê³„ì ˆì€ {blank}ì…ë‹ˆë‹¤." },
                { korean: "ì—¬ë¦„", english: "summer", sentence: "ìˆ˜ì˜ì€ {blank}ì— ìì£¼ í•´ìš”." },
                { korean: "ê°€ì„", english: "autumn", sentence: "{blank}ì€ ë…ì„œì˜ ê³„ì ˆì´ì—ìš”." },
                { korean: "ê²¨ìš¸", english: "winter", sentence: "ìŠ¤í‚¤ëŠ” {blank}ì— íƒ€ìš”." },
                { korean: "ê°€ë³ë‹¤", english: "lightweight", sentence: "ì´ ê°€ë°©ì€ ì •ë§ {blank}." },
                { korean: "ì‰½ë‹¤", english: "easy", sentence: "í•œêµ­ì–´ ê³µë¶€ëŠ” {blank}." },
                { korean: "ì¢‹ë‹¤", english: "good", sentence: "ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì•„ì£¼ {blank}." },
                { korean: "ì–´ë µë‹¤", english: "difficult", sentence: "ì´ ìˆ˜í•™ ë¬¸ì œëŠ” ë„ˆë¬´ {blank}." },
                { korean: "ë§µë‹¤", english: "spicy", sentence: "ê¹€ì¹˜ì°Œê°œê°€ ì¡°ê¸ˆ {blank}." },
            ],
            8: [
                { korean: "ê²Œì„ì„ í•˜ë‹¤", english: "to play a game", sentence: "ì£¼ë§ì— ì¹œêµ¬ë“¤ê³¼ {blank}." },
                { korean: "ê³¨í”„ë¥¼ ì¹˜ë‹¤", english: "to play golf", sentence: "ì•„ë²„ì§€ëŠ” {blank}ë¥¼ ì¢‹ì•„í•´ìš”." },
                { korean: "ê¸°íƒ€ë¥¼ ì¹˜ë‹¤", english: "to play the guitar", sentence: "ì €ëŠ” ë…¸ë˜í•˜ë©° {blank}." },
                { korean: "ë‹¹êµ¬ë¥¼ ì¹˜ë‹¤", english: "to play billiards", sentence: "ì¹œêµ¬ì™€ ê°™ì´ {blank}." },
                { korean: "ìŠ¤ì¼€ì´íŠ¸ë¥¼ íƒ€ë‹¤", english: "to skate", sentence: "ê²¨ìš¸ì— ì•„ì´ìŠ¤ë§í¬ì—ì„œ {blank}." },
                { korean: "ìŠ¤í‚¤ë¥¼ íƒ€ë‹¤", english: "to ski", sentence: "ê²¨ìš¸ ë°©í•™ì— {blank}." },
                { korean: "ìì „ê±°ë¥¼ íƒ€ë‹¤", english: "to ride a bike", sentence: "ê³µì›ì—ì„œ {blank}." },
                { korean: "ì¶•êµ¬ë¥¼ í•˜ë‹¤", english: "to play soccer", sentence: "ìš´ë™ì¥ì—ì„œ ì•„ì´ë“¤ì´ {blank}." },
                { korean: "í…Œë‹ˆìŠ¤ë¥¼ ì¹˜ë‹¤", english: "to play tennis", sentence: "ì €ëŠ” {blank}ë¥¼ ì˜ ëª»í•´ìš”." },
                { korean: "í”¼ì•„ë…¸ë¥¼ ì¹˜ë‹¤", english: "to play the piano", sentence: "ì–´ë ¸ì„ ë•Œë¶€í„° {blank}." },
                { korean: "ë‚®ì ì„ ìë‹¤", english: "to take a nap", sentence: "ì ì‹¬ì„ ë¨¹ê³  {blank}." },
                { korean: "ë…¸ë˜ë°©ì— ê°€ë‹¤", english: "to go to karaoke", sentence: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ëŸ¬ {blank}." },
                { korean: "ë“±ì‚°ì„ í•˜ë‹¤", english: "to hike", sentence: "ì£¼ë§ë§ˆë‹¤ ì‚°ì— ê°€ì„œ {blank}." },
                { korean: "ì—¬í–‰ì„ í•˜ë‹¤", english: "to travel", sentence: "ë°©í•™ì— ì œì£¼ë„ë¡œ {blank}." },
                { korean: "ì°œì§ˆë°©ì— ê°€ë‹¤", english: "to go to a jjimjilbang", sentence: "í”¼ê³¤í•  ë•Œ {blank}." },
            ]
        };

        // --- State ---
        let currentQuizData = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOption = null;
        let isAnswered = false;

        // --- Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const quizTitle = document.getElementById('quiz-title');
        const progressEl = document.getElementById('progress');
        const sentenceEl = document.getElementById('sentence');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const finalScoreEl = document.getElementById('score');

        // --- Functions ---
        
        // Fisher-Yates shuffle algorithm
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function startQuiz(lesson) {
            if (lesson === 'all') {
                currentQuizData = shuffle([...vocabulary[7], ...vocabulary[8]]);
                quizTitle.textContent = "ì¢…í•© í€´ì¦ˆ";
            } else {
                currentQuizData = shuffle([...vocabulary[lesson]]);
                quizTitle.textContent = `${lesson}ê³¼ í€´ì¦ˆ`;
            }
            
            currentQuestionIndex = 0;
            score = 0;
            isAnswered = false;

            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            endScreen.classList.add('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            isAnswered = false;
            selectedOption = null;
            feedbackEl.textContent = '';
            
            if (currentQuestionIndex >= currentQuizData.length) {
                showEndScreen();
                return;
            }

            progressEl.textContent = `${currentQuestionIndex + 1} / ${currentQuizData.length}`;
            const question = currentQuizData[currentQuestionIndex];

            sentenceEl.innerHTML = question.sentence.replace('{blank}', `<span class="blank-space" id="blank-space">?</span>`);
            
            // --- Generate options ---
            const correctAnswer = question.korean;
            const options = [correctAnswer];
            
            // Get all vocab words from the same lesson or combined list
            const allWords = currentQuizData.map(item => item.korean);
            
            // Get random incorrect options
            while (options.length < 4) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }

            optionsEl.innerHTML = '';
            shuffle(options).forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'text-lg', 'font-semibold', 'transition-all', 'duration-200', 'shadow-sm', 'bg-white', 'text-slate-700', 'border-slate-300', 'hover:bg-slate-50', 'hover:border-blue-400');
                button.onclick = () => selectOption(button);
                optionsEl.appendChild(button);
            });
        }

        function selectOption(optionElement) {
            if (isAnswered) return;

            // Deselect previous option
            if (selectedOption) {
                selectedOption.classList.remove('selected');
            }
            // Select new option
            selectedOption = optionElement;
            selectedOption.classList.add('selected');
            
            checkAnswer(selectedOption.textContent);
        }

        function checkAnswer(answer) {
            if (isAnswered) return;
            isAnswered = true;

            const correctAnswer = currentQuizData[currentQuestionIndex].korean;
            const blankSpace = document.getElementById('blank-space');

            if (answer === correctAnswer) {
                score++;
                feedbackEl.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                feedbackEl.classList.remove('text-red-500');
                feedbackEl.classList.add('text-green-500');
                blankSpace.textContent = correctAnswer;
                blankSpace.classList.add('feedback-correct', 'text-green-600', 'border-green-500');
                blankSpace.classList.remove('text-blue-600', 'border-gray-400');
            } else {
                feedbackEl.textContent = `í‹€ë ¸ì–´ìš”. ì •ë‹µ: ${correctAnswer}`;
                feedbackEl.classList.remove('text-green-500');
                feedbackEl.classList.add('text-red-500');
                blankSpace.textContent = answer;
                blankSpace.classList.add('feedback-incorrect', 'text-red-600', 'border-red-500');
                blankSpace.classList.remove('text-blue-600', 'border-gray-400');
            }

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 2000);
        }
        
        function showEndScreen() {
            quizScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            const percentage = Math.round((score / currentQuizData.length) * 100);
            finalScoreEl.textContent = `${percentage}%`;
        }

        function restartApp() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }

    </script>
</body>
</html>
