<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ì–´íœ˜ í•™ìŠµ í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation; /* ëª¨ë°”ì¼ì—ì„œ ë”ë¸” íƒ­ í™•ëŒ€ ë°©ì§€ */
        }
        /* ë¹ˆì¹¸ í€´ì¦ˆ ìŠ¤íƒ€ì¼ */
        .quiz-option.selected {
            transform: scale(1.05);
            background-color: #60a5fa; /* blue-400 */
            color: white;
            border-color: #3b82f6; /* blue-600 */
        }
        .blank-space {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid #9ca3af; /* gray-400 */
            text-align: center;
            padding: 2px 12px;
            font-weight: 700;
            color: #3b82f6; /* blue-600 */
        }
        /* ë°˜ëŒ€ë§ í€´ì¦ˆ ìŠ¤íƒ€ì¼ */
        .word-button.selected {
            background-color: #facc15; /* yellow-400 */
            border-color: #f59e0b; /* amber-500 */
            transform: scale(1.05);
        }
        .word-button.matched {
            background-color: #4ade80; /* green-400 */
            border-color: #22c55e; /* green-500 */
            color: white;
            opacity: 0.6;
            cursor: default;
        }

        /* ê³µí†µ ì• ë‹ˆë©”ì´ì…˜ */
        .feedback-correct {
            animation: correct-pulse 0.5s ease;
        }
        .feedback-incorrect {
            animation: incorrect-shake 0.5s ease;
        }
        @keyframes correct-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all">

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-screen">
            <h1 class="text-3xl font-bold text-center text-slate-800 mb-2">í•œêµ­ì–´ ì–´íœ˜ í€´ì¦ˆ</h1>
            <p class="text-center text-slate-500 mb-8">í€´ì¦ˆ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”.</p>
            <div class="space-y-4">
                <div class="border-b pb-4">
                    <h2 class="font-semibold text-slate-600 mb-2 text-center">ğŸ“ ë¹ˆì¹¸ ì±„ìš°ê¸°</h2>
                     <button onclick="startFillInTheBlankQuiz(7)" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">7ê³¼: ë‚ ì”¨ì™€ ê³„ì ˆ</button>
                    <button onclick="startFillInTheBlankQuiz(8)" class="mt-2 w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">8ê³¼: í™œë™ê³¼ ìš´ë™</button>
                    <button onclick="startFillInTheBlankQuiz('all')" class="mt-2 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">7ê³¼ + 8ê³¼ ëª¨ë‘</button>
                </div>
                <div>
                     <h2 class="font-semibold text-slate-600 mb-2 text-center">ğŸ”„ ë°˜ëŒ€ë§ ì°¾ê¸°</h2>
                     <button onclick="startAntonymQuiz()" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">ì‹œì‘í•˜ê¸°</button>
                </div>
            </div>
        </div>

        <!-- ë¹ˆì¹¸ ì±„ìš°ê¸° í€´ì¦ˆ í™”ë©´ -->
        <div id="fill-in-the-blank-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 id="quiz-title" class="text-2xl font-bold text-slate-700"></h2>
                <div id="progress" class="text-lg font-semibold text-slate-500"></div>
            </div>
            <div class="bg-slate-50 p-6 rounded-lg mb-6 min-h-[100px] flex items-center justify-center">
                <p id="sentence" class="text-2xl md:text-3xl text-center leading-relaxed font-medium text-slate-800"></p>
            </div>
            <div id="options" class="grid grid-cols-2 gap-4"></div>
            <div id="feedback" class="mt-6 text-center text-xl font-bold h-8"></div>
        </div>
        
        <!-- ë°˜ëŒ€ë§ ì°¾ê¸° í€´ì¦ˆ í™”ë©´ -->
        <div id="antonym-quiz-screen" class="hidden">
             <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-slate-700">ë°˜ëŒ€ë§ ì§ ë§ì¶”ê¸°</h2>
                <div id="antonym-progress" class="text-lg font-semibold text-slate-500"></div>
            </div>
            <p class="text-center text-slate-500 mb-6">ì„œë¡œ ë°˜ëŒ€ë˜ëŠ” ë‹¨ì–´ë¥¼ í•˜ë‚˜ì”© í´ë¦­í•˜ì—¬ ì—°ê²°í•˜ì„¸ìš”.</p>
            <div id="antonym-feedback" class="text-center h-6 mb-4 text-lg font-semibold"></div>
            <div class="flex justify-between gap-4">
                <div id="left-column" class="flex-1 flex flex-col gap-3"></div>
                <div id="right-column" class="flex-1 flex flex-col gap-3"></div>
            </div>
        </div>


        <!-- ì¢…ë£Œ í™”ë©´ -->
        <div id="end-screen" class="hidden text-center">
            <h2 id="end-title" class="text-3xl font-bold text-slate-800 mb-4">í€´ì¦ˆ ì™„ë£Œ!</h2>
            <div id="score-container" class="bg-blue-50 p-6 rounded-lg mb-6">
                <p class="text-lg text-slate-600">ìµœì¢… ì ìˆ˜</p>
                <p id="score" class="text-6xl font-bold text-blue-500 my-2"></p>
            </div>
            <div id="antonym-end-message" class="hidden bg-purple-50 p-8 rounded-lg mb-6">
                <p class="text-4xl">ğŸ‰</p>
                <p class="text-2xl font-bold text-purple-600 mt-2">ëª¨ë‘ ë§í˜”ì–´ìš”! ì°¸ ì˜í–ˆì–´ìš”!</p>
            </div>
            <button onclick="restartApp()" class="w-full bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <script>
        // --- ë°ì´í„° ---
        const vocabulary = {
            7: [
                { korean: "ëˆˆì´ ì˜¤ë‹¤", sentence: "í•˜ëŠ˜ì—ì„œ í•˜ì–€ {blank}." },
                { korean: "ì¶¥ë‹¤", sentence: "ê²¨ìš¸ì€ ë‚ ì”¨ê°€ {blank}." },
                { korean: "ë¥ë‹¤", sentence: "ì—¬ë¦„ì€ ë„ˆë¬´ {blank}." },
                { korean: "ë§‘ë‹¤", sentence: "ì˜¤ëŠ˜ì€ í•˜ëŠ˜ì´ ì•„ì£¼ {blank}." },
                { korean: "ë¹„ê°€ ì˜¤ë‹¤", sentence: "ìš°ì‚°ì„ ì±™ê¸°ì„¸ìš”. ë°–ì— {blank}." },
                { korean: "ì‹œì›í•˜ë‹¤", sentence: "ê°€ì„ ë°”ëŒì€ ì •ë§ {blank}." },
                { korean: "íë¦¬ë‹¤", sentence: "ë‚ ì”¨ê°€ {blank}." },
                { korean: "ë´„", sentence: "ê½ƒì´ í”¼ëŠ” ê³„ì ˆì€ {blank}ì…ë‹ˆë‹¤." },
                { korean: "ì—¬ë¦„", sentence: "ìˆ˜ì˜ì€ {blank}ì— ìì£¼ í•´ìš”." },
                { korean: "ê°€ì„", sentence: "{blank}ì€ ë…ì„œì˜ ê³„ì ˆì´ì—ìš”." },
                { korean: "ê²¨ìš¸", sentence: "ìŠ¤í‚¤ëŠ” {blank}ì— íƒ€ìš”." },
                { korean: "ê°€ë³ë‹¤", sentence: "ì´ ê°€ë°©ì€ ì •ë§ {blank}." },
                { korean: "ì‰½ë‹¤", sentence: "í•œêµ­ì–´ ê³µë¶€ëŠ” {blank}." },
                { korean: "ì¢‹ë‹¤", sentence: "ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì•„ì£¼ {blank}." },
                { korean: "ì–´ë µë‹¤", sentence: "ì´ ìˆ˜í•™ ë¬¸ì œëŠ” ë„ˆë¬´ {blank}." },
                { korean: "ë§µë‹¤", sentence: "ê¹€ì¹˜ì°Œê°œê°€ ì¡°ê¸ˆ {blank}." },
            ],
            8: [
                { korean: "ê²Œì„ì„ í•˜ë‹¤", sentence: "ì£¼ë§ì— ì¹œêµ¬ë“¤ê³¼ {blank}." },
                { korean: "ê³¨í”„ë¥¼ ì¹˜ë‹¤", sentence: "ì•„ë²„ì§€ëŠ” {blank}ë¥¼ ì¢‹ì•„í•´ìš”." },
                { korean: "ê¸°íƒ€ë¥¼ ì¹˜ë‹¤", sentence: "ì €ëŠ” ë…¸ë˜í•˜ë©° {blank}." },
                { korean: "ë‹¹êµ¬ë¥¼ ì¹˜ë‹¤", sentence: "ì¹œêµ¬ì™€ ê°™ì´ {blank}." },
                { korean: "ìŠ¤ì¼€ì´íŠ¸ë¥¼ íƒ€ë‹¤", sentence: "ê²¨ìš¸ì— ì•„ì´ìŠ¤ë§í¬ì—ì„œ {blank}." },
                { korean: "ìŠ¤í‚¤ë¥¼ íƒ€ë‹¤", sentence: "ê²¨ìš¸ ë°©í•™ì— {blank}." },
                { korean: "ìì „ê±°ë¥¼ íƒ€ë‹¤", sentence: "ê³µì›ì—ì„œ {blank}." },
                { korean: "ì¶•êµ¬ë¥¼ í•˜ë‹¤", sentence: "ìš´ë™ì¥ì—ì„œ ì•„ì´ë“¤ì´ {blank}." },
                { korean: "í…Œë‹ˆìŠ¤ë¥¼ ì¹˜ë‹¤", sentence: "ì €ëŠ” {blank}ë¥¼ ì˜ ëª»í•´ìš”." },
                { korean: "í”¼ì•„ë…¸ë¥¼ ì¹˜ë‹¤", sentence: "ì–´ë ¸ì„ ë•Œë¶€í„° {blank}." },
                { korean: "ë‚®ì ì„ ìë‹¤", sentence: "ì ì‹¬ì„ ë¨¹ê³  {blank}." },
                { korean: "ë…¸ë˜ë°©ì— ê°€ë‹¤", sentence: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í’€ëŸ¬ {blank}." },
                { korean: "ë“±ì‚°ì„ í•˜ë‹¤", sentence: "ì£¼ë§ë§ˆë‹¤ ì‚°ì— ê°€ì„œ {blank}." },
                { korean: "ì—¬í–‰ì„ í•˜ë‹¤", sentence: "ë°©í•™ì— ì œì£¼ë„ë¡œ {blank}." },
                { korean: "ì°œì§ˆë°©ì— ê°€ë‹¤", sentence: "í”¼ê³¤í•  ë•Œ {blank}." },
            ]
        };

        const antonyms = [
            { word1: "ë¥ë‹¤", word2: "ì¶¥ë‹¤" },
            { word1: "ì‰½ë‹¤", word2: "ì–´ë µë‹¤" },
            { word1: "ë§‘ë‹¤", word2: "íë¦¬ë‹¤" },
            { word1: "ì¢‹ë‹¤", word2: "ë‚˜ì˜ë‹¤" }, // 'ë‚˜ì˜ë‹¤' ì¶”ê°€
            { word1: "ê°€ë³ë‹¤", word2: "ë¬´ê²ë‹¤" }, // 'ë¬´ê²ë‹¤' ì¶”ê°€
        ];

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let currentQuizData = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        let selectedAntonymWord = null;
        let matchedPairs = 0;
        
        // --- DOM ìš”ì†Œ ---
        const startScreen = document.getElementById('start-screen');
        const endScreen = document.getElementById('end-screen');

        // ë¹ˆì¹¸ í€´ì¦ˆ ìš”ì†Œ
        const fillInTheBlankScreen = document.getElementById('fill-in-the-blank-screen');
        const quizTitle = document.getElementById('quiz-title');
        const progressEl = document.getElementById('progress');
        const sentenceEl = document.getElementById('sentence');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const finalScoreEl = document.getElementById('score');
        const scoreContainer = document.getElementById('score-container');

        // ë°˜ëŒ€ë§ í€´ì¦ˆ ìš”ì†Œ
        const antonymQuizScreen = document.getElementById('antonym-quiz-screen');
        const leftColumn = document.getElementById('left-column');
        const rightColumn = document.getElementById('right-column');
        const antonymProgress = document.getElementById('antonym-progress');
        const antonymFeedback = document.getElementById('antonym-feedback');
        const antonymEndMessage = document.getElementById('antonym-end-message');


        // --- ê³µí†µ í•¨ìˆ˜ ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function restartApp() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            fillInTheBlankScreen.classList.add('hidden');
            antonymQuizScreen.classList.add('hidden');
        }

        // --- ë¹ˆì¹¸ ì±„ìš°ê¸° í€´ì¦ˆ ë¡œì§ ---
        function startFillInTheBlankQuiz(lesson) {
            if (lesson === 'all') {
                currentQuizData = shuffle([...vocabulary[7], ...vocabulary[8]]);
                quizTitle.textContent = "ì¢…í•© í€´ì¦ˆ";
            } else {
                currentQuizData = shuffle([...vocabulary[lesson]]);
                quizTitle.textContent = `${lesson}ê³¼ í€´ì¦ˆ`;
            }
            
            currentQuestionIndex = 0;
            score = 0;
            isAnswered = false;

            startScreen.classList.add('hidden');
            fillInTheBlankScreen.classList.remove('hidden');
            
            loadFillInTheBlankQuestion();
        }

        function loadFillInTheBlankQuestion() {
            isAnswered = false;
            feedbackEl.textContent = '';
            
            if (currentQuestionIndex >= currentQuizData.length) {
                showEndScreen(false); // isAntonymQuiz = false
                return;
            }

            progressEl.textContent = `${currentQuestionIndex + 1} / ${currentQuizData.length}`;
            const question = currentQuizData[currentQuestionIndex];
            sentenceEl.innerHTML = question.sentence.replace('{blank}', `<span class="blank-space">?</span>`);
            
            const correctAnswer = question.korean;
            const options = [correctAnswer];
            const allWords = currentQuizData.map(item => item.korean);
            
            while (options.length < 4) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (!options.includes(randomWord)) options.push(randomWord);
            }

            optionsEl.innerHTML = '';
            shuffle(options).forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'text-lg', 'font-semibold', 'transition-all', 'duration-200', 'shadow-sm', 'bg-white', 'text-slate-700', 'border-slate-300', 'hover:bg-slate-50', 'hover:border-blue-400');
                button.onclick = () => checkFillInTheBlankAnswer(button, option);
                optionsEl.appendChild(button);
            });
        }

        function checkFillInTheBlankAnswer(buttonEl, answer) {
            if (isAnswered) return;
            isAnswered = true;

            const correctAnswer = currentQuizData[currentQuestionIndex].korean;
            const blankSpace = sentenceEl.querySelector('.blank-space');

            // ëª¨ë“  ì˜µì…˜ ì„ íƒ í•´ì œ ë° ë¹„í™œì„±í™”
            document.querySelectorAll('.quiz-option').forEach(btn => {
                btn.classList.remove('selected');
                btn.disabled = true;
            });
            buttonEl.classList.add('selected'); // ì„ íƒí•œ ê²ƒë§Œ í‘œì‹œ

            if (answer === correctAnswer) {
                score++;
                feedbackEl.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                feedbackEl.classList.add('text-green-500');
                blankSpace.textContent = correctAnswer;
                blankSpace.classList.add('feedback-correct', 'text-green-600', 'border-green-500');
            } else {
                feedbackEl.textContent = `í‹€ë ¸ì–´ìš”. ì •ë‹µ: ${correctAnswer}`;
                feedbackEl.classList.add('text-red-500');
                blankSpace.textContent = answer;
                blankSpace.classList.add('feedback-incorrect', 'text-red-600', 'border-red-500');
            }

            setTimeout(() => {
                currentQuestionIndex++;
                loadFillInTheBlankQuestion();
            }, 2000);
        }

        // --- ë°˜ëŒ€ë§ ì°¾ê¸° í€´ì¦ˆ ë¡œì§ ---
        function startAntonymQuiz() {
            startScreen.classList.add('hidden');
            antonymQuizScreen.classList.remove('hidden');

            selectedAntonymWord = null;
            matchedPairs = 0;
            antonymFeedback.textContent = '';
            antonymProgress.textContent = `ë§ì¶˜ ê°œìˆ˜: 0 / ${antonyms.length}`;
            
            const shuffledAntonyms = shuffle([...antonyms]);
            const col1Words = shuffle(shuffledAntonyms.map(pair => pair.word1));
            const col2Words = shuffle(shuffledAntonyms.map(pair => pair.word2));

            renderWordButtons(leftColumn, col1Words);
            renderWordButtons(rightColumn, col2Words);
        }

        function renderWordButtons(columnEl, words) {
            columnEl.innerHTML = '';
            words.forEach(word => {
                const button = document.createElement('button');
                button.textContent = word;
                button.dataset.word = word;
                button.classList.add('word-button', 'w-full', 'p-3', 'border-2', 'rounded-lg', 'text-lg', 'font-semibold', 'transition-all', 'duration-200', 'shadow-sm', 'bg-white', 'text-slate-700', 'border-slate-300');
                button.onclick = () => handleWordSelection(button);
                columnEl.appendChild(button);
            });
        }

        function handleWordSelection(buttonEl) {
            if (buttonEl.classList.contains('matched')) return;

            if (!selectedAntonymWord) {
                selectedAntonymWord = buttonEl;
                buttonEl.classList.add('selected');
            } else {
                // ì´ë¯¸ ì„ íƒëœ ë‹¨ì–´ì™€ ê°™ì€ ë‹¨ì–´ í´ë¦­ ì‹œ ì„ íƒ ì·¨ì†Œ
                if (selectedAntonymWord === buttonEl) {
                    selectedAntonymWord.classList.remove('selected');
                    selectedAntonymWord = null;
                    return;
                }
                
                // ê°™ì€ ì—´ì— ìˆëŠ” ë‹¨ì–´ë¥¼ í´ë¦­í–ˆì„ ë•Œ, ì„ íƒ ë³€ê²½
                if (selectedAntonymWord.parentElement === buttonEl.parentElement) {
                    selectedAntonymWord.classList.remove('selected');
                    selectedAntonymWord = buttonEl;
                    buttonEl.classList.add('selected');
                    return;
                }

                checkAntonymMatch(selectedAntonymWord, buttonEl);
            }
        }
        
        function isAntonymPair(word1, word2) {
            return antonyms.some(pair => 
                (pair.word1 === word1 && pair.word2 === word2) || 
                (pair.word1 === word2 && pair.word2 === word1)
            );
        }

        function checkAntonymMatch(btn1, btn2) {
            const word1 = btn1.dataset.word;
            const word2 = btn2.dataset.word;

            // ì •ë‹µ í™•ì¸ ì „ ëª¨ë“  ë²„íŠ¼ í´ë¦­ ë°©ì§€
            document.querySelectorAll('.word-button').forEach(b => b.disabled = true);

            if (isAntonymPair(word1, word2)) {
                // ì •ë‹µì¼ ê²½ìš°
                matchedPairs++;
                antonymProgress.textContent = `ë§ì¶˜ ê°œìˆ˜: ${matchedPairs} / ${antonyms.length}`;
                antonymFeedback.textContent = 'ì •ë‹µ! âœ¨';
                antonymFeedback.classList.add('text-green-500');
                antonymFeedback.classList.remove('text-red-500');

                btn1.classList.remove('selected');
                btn1.classList.add('matched');
                btn2.classList.add('matched');
                
                selectedAntonymWord = null;

                if (matchedPairs === antonyms.length) {
                    setTimeout(() => showEndScreen(true), 1000); // isAntonymQuiz = true
                }
            } else {
                // ì˜¤ë‹µì¼ ê²½ìš°
                antonymFeedback.textContent = 'ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.';
                antonymFeedback.classList.add('text-red-500');
                antonymFeedback.classList.remove('text-green-500');

                btn1.classList.add('feedback-incorrect');
                btn2.classList.add('feedback-incorrect');
                
                setTimeout(() => {
                    btn1.classList.remove('feedback-incorrect', 'selected');
                    btn2.classList.remove('selected');
                    selectedAntonymWord = null;
                }, 600);
            }
            
            // 0.6ì´ˆ í›„ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
            setTimeout(() => {
                 document.querySelectorAll('.word-button:not(.matched)').forEach(b => b.disabled = false);
            }, 600);
        }
        
        // --- ì¢…ë£Œ í™”ë©´ ë¡œì§ ---
        function showEndScreen(isAntonymQuiz) {
            fillInTheBlankScreen.classList.add('hidden');
            antonymQuizScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');

            if (isAntonymQuiz) {
                scoreContainer.classList.add('hidden');
                antonymEndMessage.classList.remove('hidden');
                document.getElementById('end-title').textContent = 'ë„ì „ ì™„ë£Œ!';
            } else {
                scoreContainer.classList.remove('hidden');
                antonymEndMessage.classList.add('hidden');
                document.getElementById('end-title').textContent = 'í€´ì¦ˆ ì™„ë£Œ!';
                const percentage = Math.round((score / currentQuizData.length) * 100);
                finalScoreEl.textContent = `${percentage}%`;
            }
        }

    </script>
</body>
</html>

