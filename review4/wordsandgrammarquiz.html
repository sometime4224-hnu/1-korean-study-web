<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국어 어휘 학습 퀴즈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation; /* Disable double-tap zoom on mobile */
        }
        .quiz-option.selected {
            transform: scale(1.05);
            background-color: #60a5fa; /* blue-400 */
            color: white;
            border-color: #3b82f6; /* blue-600 */
        }
        .feedback-correct {
            animation: correct-pulse 0.5s ease;
        }
        .feedback-incorrect {
            animation: incorrect-shake 0.5s ease;
        }
        @keyframes correct-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        .blank-space {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid #9ca3af; /* gray-400 */
            text-align: center;
            padding: 2px 12px;
            font-weight: 700;
            color: #3b82f6; /* blue-600 */
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">

    <div id="app-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8 transform transition-all">

        <!-- Start Screen -->
        <div id="start-screen">
            <h1 class="text-3xl font-bold text-center text-slate-800 mb-2">한국어 어휘 퀴즈</h1>
            <p class="text-center text-slate-500 mb-8">복습할 과를 선택하세요.</p>
            <div class="space-y-4">
                <button onclick="startQuiz(7)" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    7과: 날씨와 계절
                </button>
                <button onclick="startQuiz(8)" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    8과: 활동과 운동
                </button>
                 <button onclick="startQuiz('all')" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                    7과 + 8과 모두
                </button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 id="quiz-title" class="text-2xl font-bold text-slate-700"></h2>
                <div id="progress" class="text-lg font-semibold text-slate-500"></div>
            </div>

            <div class="bg-slate-50 p-6 rounded-lg mb-6 min-h-[100px] flex items-center justify-center">
                <p id="sentence" class="text-2xl md:text-3xl text-center leading-relaxed font-medium text-slate-800"></p>
            </div>

            <div id="options" class="grid grid-cols-2 gap-4">
                <!-- Options will be dynamically inserted here -->
            </div>
            
            <div id="feedback" class="mt-6 text-center text-xl font-bold h-8"></div>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-slate-800 mb-4">퀴즈 완료!</h2>
            <div class="bg-blue-50 p-6 rounded-lg mb-6">
                <p class="text-lg text-slate-600">최종 점수</p>
                <p id="score" class="text-6xl font-bold text-blue-500 my-2"></p>
            </div>
            <button onclick="restartApp()" class="w-full bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                처음으로 돌아가기
            </button>
        </div>
    </div>

    <script>
        // --- Data ---
        const vocabulary = {
            7: [
                { korean: "눈이 오다", english: "to snow", sentence: "하늘에서 하얀 {blank}." },
                { korean: "춥다", english: "cold", sentence: "겨울은 날씨가 {blank}." },
                { korean: "덥다", english: "hot", sentence: "여름은 너무 {blank}." },
                { korean: "맑다", english: "clear/sunny", sentence: "오늘은 하늘이 아주 {blank}." },
                { korean: "비가 오다", english: "to rain", sentence: "우산을 챙기세요. 밖에 {blank}." },
                { korean: "시원하다", english: "cool", sentence: "가을 바람은 정말 {blank}." },
                { korean: "흐리다", english: "cloudy", sentence: "날씨가 {blank}." },
                { korean: "봄", english: "spring", sentence: "꽃이 피는 계절은 {blank}입니다." },
                { korean: "여름", english: "summer", sentence: "수영은 {blank}에 자주 해요." },
                { korean: "가을", english: "autumn", sentence: "{blank}은 독서의 계절이에요." },
                { korean: "겨울", english: "winter", sentence: "스키는 {blank}에 타요." },
                { korean: "가볍다", english: "lightweight", sentence: "이 가방은 정말 {blank}." },
                { korean: "쉽다", english: "easy", sentence: "한국어 공부는 {blank}." },
                { korean: "좋다", english: "good", sentence: "오늘 기분이 아주 {blank}." },
                { korean: "어렵다", english: "difficult", sentence: "이 수학 문제는 너무 {blank}." },
                { korean: "맵다", english: "spicy", sentence: "김치찌개가 조금 {blank}." },
            ],
            8: [
                { korean: "게임을 하다", english: "to play a game", sentence: "주말에 친구들과 {blank}." },
                { korean: "골프를 치다", english: "to play golf", sentence: "아버지는 {blank}를 좋아해요." },
                { korean: "기타를 치다", english: "to play the guitar", sentence: "저는 노래하며 {blank}." },
                { korean: "당구를 치다", english: "to play billiards", sentence: "친구와 같이 {blank}." },
                { korean: "스케이트를 타다", english: "to skate", sentence: "겨울에 아이스링크에서 {blank}." },
                { korean: "스키를 타다", english: "to ski", sentence: "겨울 방학에 {blank}." },
                { korean: "자전거를 타다", english: "to ride a bike", sentence: "공원에서 {blank}." },
                { korean: "축구를 하다", english: "to play soccer", sentence: "운동장에서 아이들이 {blank}." },
                { korean: "테니스를 치다", english: "to play tennis", sentence: "저는 {blank}를 잘 못해요." },
                { korean: "피아노를 치다", english: "to play the piano", sentence: "어렸을 때부터 {blank}." },
                { korean: "낮잠을 자다", english: "to take a nap", sentence: "점심을 먹고 {blank}." },
                { korean: "노래방에 가다", english: "to go to karaoke", sentence: "스트레스를 풀러 {blank}." },
                { korean: "등산을 하다", english: "to hike", sentence: "주말마다 산에 가서 {blank}." },
                { korean: "여행을 하다", english: "to travel", sentence: "방학에 제주도로 {blank}." },
                { korean: "찜질방에 가다", english: "to go to a jjimjilbang", sentence: "피곤할 때 {blank}." },
            ]
        };

        // --- State ---
        let currentQuizData = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOption = null;
        let isAnswered = false;

        // --- Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const quizTitle = document.getElementById('quiz-title');
        const progressEl = document.getElementById('progress');
        const sentenceEl = document.getElementById('sentence');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const finalScoreEl = document.getElementById('score');

        // --- Functions ---
        
        // Fisher-Yates shuffle algorithm
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function startQuiz(lesson) {
            if (lesson === 'all') {
                currentQuizData = shuffle([...vocabulary[7], ...vocabulary[8]]);
                quizTitle.textContent = "종합 퀴즈";
            } else {
                currentQuizData = shuffle([...vocabulary[lesson]]);
                quizTitle.textContent = `${lesson}과 퀴즈`;
            }
            
            currentQuestionIndex = 0;
            score = 0;
            isAnswered = false;

            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            endScreen.classList.add('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            isAnswered = false;
            selectedOption = null;
            feedbackEl.textContent = '';
            
            if (currentQuestionIndex >= currentQuizData.length) {
                showEndScreen();
                return;
            }

            progressEl.textContent = `${currentQuestionIndex + 1} / ${currentQuizData.length}`;
            const question = currentQuizData[currentQuestionIndex];

            sentenceEl.innerHTML = question.sentence.replace('{blank}', `<span class="blank-space" id="blank-space">?</span>`);
            
            // --- Generate options ---
            const correctAnswer = question.korean;
            const options = [correctAnswer];
            
            // Get all vocab words from the same lesson or combined list
            const allWords = currentQuizData.map(item => item.korean);
            
            // Get random incorrect options
            while (options.length < 4) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }

            optionsEl.innerHTML = '';
            shuffle(options).forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'text-lg', 'font-semibold', 'transition-all', 'duration-200', 'shadow-sm', 'bg-white', 'text-slate-700', 'border-slate-300', 'hover:bg-slate-50', 'hover:border-blue-400');
                button.onclick = () => selectOption(button);
                optionsEl.appendChild(button);
            });
        }

        function selectOption(optionElement) {
            if (isAnswered) return;

            // Deselect previous option
            if (selectedOption) {
                selectedOption.classList.remove('selected');
            }
            // Select new option
            selectedOption = optionElement;
            selectedOption.classList.add('selected');
            
            checkAnswer(selectedOption.textContent);
        }

        function checkAnswer(answer) {
            if (isAnswered) return;
            isAnswered = true;

            const correctAnswer = currentQuizData[currentQuestionIndex].korean;
            const blankSpace = document.getElementById('blank-space');

            if (answer === correctAnswer) {
                score++;
                feedbackEl.textContent = '정답입니다! 🎉';
                feedbackEl.classList.remove('text-red-500');
                feedbackEl.classList.add('text-green-500');
                blankSpace.textContent = correctAnswer;
                blankSpace.classList.add('feedback-correct', 'text-green-600', 'border-green-500');
                blankSpace.classList.remove('text-blue-600', 'border-gray-400');
            } else {
                feedbackEl.textContent = `틀렸어요. 정답: ${correctAnswer}`;
                feedbackEl.classList.remove('text-green-500');
                feedbackEl.classList.add('text-red-500');
                blankSpace.textContent = answer;
                blankSpace.classList.add('feedback-incorrect', 'text-red-600', 'border-red-500');
                blankSpace.classList.remove('text-blue-600', 'border-gray-400');
            }

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 2000);
        }
        
        function showEndScreen() {
            quizScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            const percentage = Math.round((score / currentQuizData.length) * 100);
            finalScoreEl.textContent = `${percentage}%`;
        }

        function restartApp() {
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }

    </script>
</body>
</html>
