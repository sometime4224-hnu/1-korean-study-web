<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ì½ê¸°/ì“°ê¸° í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            touch-action: manipulation;
        }
        .quiz-screen { display: none; }
        .quiz-screen.active { display: block; }
        .option-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
            font-size: 1.125rem;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-btn:hover {
            border-color: #60a5fa;
            background-color: #eff6ff;
        }
        .option-btn.selected {
            border-color: #3b82f6;
            background-color: #dbeafe;
        }
        .emoji-option {
            font-size: 3rem;
        }
        .scramble-word {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        #scramble-answer-box {
            min-height: 4rem;
            border-style: dashed;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8">

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-screen" class="quiz-screen active text-center">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">í•œêµ­ì–´ ì½ê¸°/ì“°ê¸° í€´ì¦ˆ</h1>
            <p class="text-center text-slate-500 mb-8">ì•Œë§ì€ ë‹µì„ ê³ ë¥´ì„¸ìš”.</p>
            <button onclick="startQuiz()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                í€´ì¦ˆ ì‹œì‘í•˜ê¸°
            </button>
        </div>

        <!-- í€´ì¦ˆ í™”ë©´ -->
        <div id="quiz-screen" class="quiz-screen">
            <div class="flex items-center justify-between mb-4">
                <h2 id="question-title" class="text-xl font-bold text-slate-700"></h2>
                <div id="quiz-progress" class="text-lg font-semibold text-slate-500"></div>
            </div>
            <div id="question-content" class="mt-6"></div>
            <div id="feedback" class="mt-6 text-center text-md min-h-[6rem]"></div>
        </div>

        <!-- ì¢…ë£Œ í™”ë©´ -->
        <div id="end-screen" class="quiz-screen text-center">
            <h2 class="text-3xl font-bold text-slate-800 mb-4">í€´ì¦ˆ ì™„ë£Œ!</h2>
            <div class="bg-blue-50 p-6 rounded-lg mb-6">
                <p class="text-lg text-slate-600">ìµœì¢… ì ìˆ˜</p>
                <p id="score" class="text-6xl font-bold text-blue-500 my-2"></p>
            </div>
            <button onclick="startQuiz()" class="w-full bg-gray-700 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-md">
                ë‹¤ì‹œ í’€ê¸°
            </button>
        </div>
    </div>

    <script>
        const questions = [
            // 1-2: ì´ëª¨ì§€ ê³ ë¥´ê¸°
            { number: 1, type: 'emoji', title: "ë‹¤ìŒê³¼ ê´€ê³„ìˆëŠ” ê²ƒì„ ê³ ë¥´ì„¸ìš”.", keyword: "ë†êµ¬", options: ["ğŸƒ", "ğŸ¾", "ğŸš²", "ğŸ€"], answer: "ğŸ€" },
            { number: 2, type: 'emoji', title: "ë‹¤ìŒê³¼ ê´€ê³„ìˆëŠ” ê²ƒì„ ê³ ë¥´ì„¸ìš”.", keyword: "ë“±ì‚°", options: ["ğŸš¶", "ğŸ¸", "ğŸƒ", "â›·ï¸"], answer: "ğŸš¶" },
            // 3-5: ë¹ˆì¹¸ ì±„ìš°ê¸°
            { number: 3, type: 'choice', title: "ë¹ˆì¹¸ì— ê°€ì¥ ì•Œë§ì€ ê²ƒì„ ê³ ë¥´ì„¸ìš”.", questionText: "ì—¬ë¦„ì…ë‹ˆë‹¤. ë‚ ì”¨ê°€ ( ).", options: ["ì¶¥ìŠµë‹ˆë‹¤", "ë¥ìŠµë‹ˆë‹¤", "ë³µì¡í•©ë‹ˆë‹¤", "ëˆˆì´ ì˜µë‹ˆë‹¤"], answer: "ë¥ìŠµë‹ˆë‹¤" },
            { number: 4, type: 'choice', title: "ë¹ˆì¹¸ì— ê°€ì¥ ì•Œë§ì€ ê²ƒì„ ê³ ë¥´ì„¸ìš”.", questionText: "ì¼ìš”ì¼ì´ì—ìš”. ì§‘ì—ì„œ ( ).", options: ["ì‚°ì±…í•´ìš”", "ë“±ì‚°í•´ìš”", "ì—¬í–‰í•´ìš”", "ë‚®ì ì„ ììš”"], answer: "ë‚®ì ì„ ììš”" },
            { number: 5, type: 'choice', title: "ë¹ˆì¹¸ì— ê°€ì¥ ì•Œë§ì€ ê²ƒì„ ê³ ë¥´ì„¸ìš”.", questionText: "ê¹€ì¹˜ë¥¼ ì•ˆ ë¨¹ì–´ìš”. ê¹€ì¹˜ê°€ ( ).", options: ["ë§¤ì›Œìš”", "ê°€ë²¼ì›Œìš”", "ë³µì¡í•´ìš”", "ì–´ë ¤ì›Œìš”"], answer: "ë§¤ì›Œìš”" },
            // 6-7: ì£¼ì œ ê³ ë¥´ê¸°
            { number: 6, type: 'choice', title: "ë¬´ì—‡ì— ëŒ€í•œ ì´ì•¼ê¸°ì…ë‹ˆê¹Œ?", questionText: "ì €ëŠ” ê¸ˆìš”ì¼ì— í…Œë‹ˆìŠ¤ë¥¼ ì¹©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìì „ê±°ë¥¼ íƒ‘ë‹ˆë‹¤.", options: ["ì°¨", "ìš´ë™", "ì£¼ë§", "ê³µë¶€"], answer: "ìš´ë™" },
            { number: 7, type: 'choice', title: "ë¬´ì—‡ì— ëŒ€í•œ ì´ì•¼ê¸°ì…ë‹ˆê¹Œ?", questionText: "ì–´ì œëŠ” ëˆˆì´ ì™”ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ì¶¥ì§€ë§Œ ëˆˆì´ ì•ˆ ì˜µë‹ˆë‹¤.", options: ["ì£¼ë§", "ìŒì‹", "ë‚ ì”¨", "ì—¬í–‰"], answer: "ë‚ ì”¨" },
            // 8-9: ì½ê³  ë‹µí•˜ê¸°
            { number: 8, type: 'choice', title: "ë‹¤ìŒ ì¤‘ ë‚´ìš©ê³¼ ë‹¤ë¥¸ ê²ƒì„ ê³ ë¥´ì„¸ìš”.", questionText: "", options: ["ì„œìš¸ì€ ë‚ ì”¨ê°€ ì¶¥ìŠµë‹ˆë‹¤.", "ëŒ€ì „ì€ ëˆˆì´ ì˜µë‹ˆë‹¤.", "ë¶€ì‚°ì€ ë‚ ì”¨ê°€ ë¥ìŠµë‹ˆë‹¤.", "ì œì£¼ë„ëŠ” ë¹„ê°€ ì˜¤ê³  ì‹œì›í•©ë‹ˆë‹¤."], answer: "ë¶€ì‚°ì€ ë‚ ì”¨ê°€ ë¥ìŠµë‹ˆë‹¤." },
            { number: 9, type: 'choice', title: "ë‹¤ìŒ í‘œë¥¼ ë³´ê³  ë§ì§€ ì•ŠëŠ” ê²ƒì„ ê³ ë¥´ì„¸ìš”.", questionText: "<div class='text-center grid grid-cols-4 gap-2 text-sm md:text-base'><div>ì›”: â˜€ï¸ 30â„ƒ</div> <div>í™”: â˜ï¸ 27â„ƒ</div> <div>ìˆ˜: ğŸŒ§ï¸ 24â„ƒ</div> <div>ëª©: â˜€ï¸ 28â„ƒ</div> <div>ê¸ˆ: ğŸŒ§ï¸ 25â„ƒ</div> <div>í† : ğŸŒ§ï¸ 20â„ƒ</div> <div>ì¼: ğŸŒ§ï¸ 19â„ƒ</div></div>", options: ["ì›”ìš”ì¼ì—ëŠ” ë‚ ì”¨ê°€ ë¥ìŠµë‹ˆë‹¤.", "ìˆ˜ìš”ì¼ì—ëŠ” ë‚ ì”¨ê°€ íë¦½ë‹ˆë‹¤.", "ì£¼ë§ì—ëŠ” ë¹„ê°€ ì˜µë‹ˆë‹¤.", "ì§€ê¸ˆì€ ì—¬ë¦„ì…ë‹ˆë‹¤."], answer: "ìˆ˜ìš”ì¼ì—ëŠ” ë‚ ì”¨ê°€ íë¦½ë‹ˆë‹¤." },
            // 10-11: ìˆœì„œ ë§ì¶”ê¸°
            { number: 10, type: 'scramble', title: "ìˆœì„œì— ë§ê²Œ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", parts: ["ì˜µë‹ˆë‹¤", "ë¯¸êµ­ì€", "ë¹„", "ìš”ì¦˜", "ê°€"], answer: "ë¯¸êµ­ì€ ìš”ì¦˜ ë¹„ê°€ ì˜µë‹ˆë‹¤" },
            { number: 11, type: 'scramble', title: "ìˆœì„œì— ë§ê²Œ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", parts: ["ì‹ë‹¹ì€", "ë§›ìˆì–´ìš”", "ì €", "ë¹„ì‹¸ì§€ë§Œ"], answer: "ì € ì‹ë‹¹ì€ ë¹„ì‹¸ì§€ë§Œ ë§›ìˆì–´ìš”" },
            // 12-13: ëŒ€í™” ì™„ì„±
            { number: 12, type: 'choice', title: "ëŒ€í™”ë¥¼ ì™„ì„±í•˜ì„¸ìš”.", questionText: "A: ê°™ì´ ( )?<br>B: ë„¤, ì¢‹ì•„ìš”.", options: ["ìì „ê±° íƒˆê¹Œìš”", "ê³µë¶€í• ê¹Œìš”", "ì˜í™” ë³¼ê¹Œìš”", "ì‡¼í•‘í• ê¹Œìš”"], answer: "ìì „ê±° íƒˆê¹Œìš”" },
            { number: 13, type: 'choice', title: "ëŒ€í™”ë¥¼ ì™„ì„±í•˜ì„¸ìš”.", questionText: "A: ì˜¤ëŠ˜ì€ ( )?<br>B: ëˆˆì´ ì˜µë‹ˆë‹¤.", options: ["ë‚ ì”¨ê°€ ì–´ë•Œìš”", "ë­ ë¨¹ì„ê¹Œìš”", "ì–´ë””ì— ê°€ìš”", "ê¸°ë¶„ì´ ì–´ë•Œìš”"], answer: "ë‚ ì”¨ê°€ ì–´ë•Œìš”" },
            // 14-16: ì ‘ì†ì‚¬ ê³ ë¥´ê¸°
            { number: 14, type: 'connector', title: "ì•Œë§ì€ ê²ƒì„ ê³¨ë¼ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", sentences: ["í•œêµ­ì–´ê°€ ì¬ë¯¸ìˆìŠµë‹ˆë‹¤.", "í•œêµ­ì–´ê°€ ì–´ë µìŠµë‹ˆë‹¤."], options: ["-ê³ ", "-ì§€ë§Œ"], answer: "-ì§€ë§Œ", result: "í•œêµ­ì–´ê°€ ì¬ë¯¸ìˆì§€ë§Œ ì–´ë µìŠµë‹ˆë‹¤." },
            { number: 15, type: 'connector', title: "ì•Œë§ì€ ê²ƒì„ ê³¨ë¼ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", sentences: ["ìŒì•…ì„ ë“¤ì–´ìš”.", "í…”ë ˆë¹„ì „ì„ ë´ìš”."], options: ["-ê³ ", "-ì§€ë§Œ"], answer: "-ê³ ", result: "ìŒì•…ì„ ë“£ê³  í…”ë ˆë¹„ì „ì„ ë´ìš”." },
            { number: 16, type: 'connector', title: "ì•Œë§ì€ ê²ƒì„ ê³¨ë¼ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", sentences: ["ì–´ì œëŠ” ë¹„ê°€ ì™”ì–´ìš”.", "ì˜¤ëŠ˜ì€ ì•ˆ ì™€ìš”."], options: ["-ê³ ", "-ì§€ë§Œ"], answer: "-ì§€ë§Œ", result: "ì–´ì œëŠ” ë¹„ê°€ ì™”ì§€ë§Œ ì˜¤ëŠ˜ì€ ì•ˆ ì™€ìš”." },
             // 17-18: ì½ê¸° ë¬¸ì œ 1
            { number: 17, type: 'passage_choice', title: "ê¸€ì„ ì½ê³  ë¬¼ìŒì— ë‹µí•˜ì„¸ìš”.", passage: "ìš°ë¦¬ ì§‘ ì˜†ì—ëŠ” ì°œì§ˆë°©ì´ ìˆìŠµë‹ˆë‹¤. ê±°ê¸°ì—ëŠ” ë°©ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. ë°© ì•ˆì—ëŠ” ì‚¬ëŒì´ ë§ìŠµë‹ˆë‹¤. ì‚¬ëŒë“¤ì€ ê±°ê¸°ì—ì„œ ë‚®ì ì„ ìê³  ì±…ë„ ì½ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‹í˜œë„ ë§ˆì‹­ë‹ˆë‹¤. ì‹í˜œëŠ” ( ã‰  ) ë§›ìˆìŠµë‹ˆë‹¤. ì°œì§ˆë°©ì—ëŠ” ì•„ì´ìŠ¤ë°©ë„ ìˆìŠµë‹ˆë‹¤. ì•„ì´ìŠ¤ë°©ì€ ì•„ì£¼ ì¶¥ìŠµë‹ˆë‹¤. ìš”ì¦˜ ìš°ë¦¬ í•œêµ­ì–´ ë°˜ ì¹œêµ¬ë“¤ì€ ì°œì§ˆë°©ì— ìì£¼ ê°‘ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì™¸êµ­ ì‚¬ëŒì´ì§€ë§Œ í•œêµ­ì˜ ì°œì§ˆë°©ì´ ì¢‹ìŠµë‹ˆë‹¤.", questionText: "ã‰ ì— ë“¤ì–´ê°ˆ ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", options: ["ë§µê³ ", "ì¶¥ê³ ", "ë³µì¡í•˜ê³ ", "ì‹œì›í•˜ê³ "], answer: "ì‹œì›í•˜ê³ " },
            { number: 18, type: 'passage_choice', title: "ê¸€ì„ ì½ê³  ë¬¼ìŒì— ë‹µí•˜ì„¸ìš”.", passage: "ìš°ë¦¬ ì§‘ ì˜†ì—ëŠ” ì°œì§ˆë°©ì´ ìˆìŠµë‹ˆë‹¤. ê±°ê¸°ì—ëŠ” ë°©ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. ë°© ì•ˆì—ëŠ” ì‚¬ëŒì´ ë§ìŠµë‹ˆë‹¤. ì‚¬ëŒë“¤ì€ ê±°ê¸°ì—ì„œ ë‚®ì ì„ ìê³  ì±…ë„ ì½ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‹í˜œë„ ë§ˆì‹­ë‹ˆë‹¤. ì‹í˜œëŠ” ì‹œì›í•˜ê³  ë§›ìˆìŠµë‹ˆë‹¤. ì°œì§ˆë°©ì—ëŠ” ì•„ì´ìŠ¤ë°©ë„ ìˆìŠµë‹ˆë‹¤. ì•„ì´ìŠ¤ë°©ì€ ì•„ì£¼ ì¶¥ìŠµë‹ˆë‹¤. ìš”ì¦˜ ìš°ë¦¬ í•œêµ­ì–´ ë°˜ ì¹œêµ¬ë“¤ì€ ì°œì§ˆë°©ì— ìì£¼ ê°‘ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì™¸êµ­ ì‚¬ëŒì´ì§€ë§Œ í•œêµ­ì˜ ì°œì§ˆë°©ì´ ì¢‹ìŠµë‹ˆë‹¤.", questionText: "ì´ ê¸€ì˜ ë‚´ìš©ê³¼ ê°™ì€ ê²ƒì„ ê³ ë¥´ì„¸ìš”.", options: ["ìš°ë¦¬ ì§‘ì—ëŠ” ë°©ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤.", "ì‚¬ëŒë“¤ì€ ì°œì§ˆë°©ì—ì„œ ì‹í˜œë¥¼ ë§ˆì‹­ë‹ˆë‹¤.", "ì°œì§ˆë°©ì˜ ë°©ë“¤ì€ ëª¨ë‘ ë”°ëœ»í•©ë‹ˆë‹¤.", "ì™¸êµ­ ì‚¬ëŒì€ í•œêµ­ì˜ ì°œì§ˆë°©ì„ ì•ˆ ì¢‹ì•„í•©ë‹ˆë‹¤."], answer: "ì‚¬ëŒë“¤ì€ ì°œì§ˆë°©ì—ì„œ ì‹í˜œë¥¼ ë§ˆì‹­ë‹ˆë‹¤." },
            // 19-20: ì½ê¸° ë¬¸ì œ 2
            { number: 19, type: 'passage_ox', title: "ê¸€ì„ ì½ê³  ë§ìœ¼ë©´ O, í‹€ë¦¬ë©´ X í•˜ì„¸ìš”.", passage: "ì €ëŠ” ë‹ˆì½œì´ì—ìš”. ìºë‚˜ë‹¤ì—ì„œ ì™”ì–´ìš”. ì €ëŠ” í•œêµ­ì—ì„œ ì˜ì–´ë¥¼ ê°€ë¥´ì³ìš”. ì§€ê¸ˆ í•œêµ­ì€ ê²¨ìš¸ì´ì—ìš”. ë‚ ì”¨ê°€ ì•„ì£¼ ì¶”ì›Œìš”. ì €ëŠ” ì§€ë‚œê²¨ìš¸ì— í•œêµ­ì—ì„œ í˜¸ë–¡ì„ ì²˜ìŒ ë¨¹ì—ˆì–´ìš”. í˜¸ë–¡ì€ ë”°ëœ»í•˜ê³  ë§›ìˆì–´ìš”. ê·¸ë˜ì„œ ìš”ì¦˜ ì €ëŠ” ë§¤ì¼ í˜¸ë–¡ì„ ë¨¹ì–´ìš”. ìºë‚˜ë‹¤ ê²¨ìš¸ë„ ì¶¥ê³  ëˆˆì´ ë§ì´ ì™€ìš”. ìºë‚˜ë‹¤ ì‚¬ëŒë“¤ì€ ê²¨ìš¸ì— ì•„ì´ë“¤ê³¼ ê°™ì´ ë©”ì´í”Œ íƒœí”¼ë¥¼ ë§Œë“¤ì–´ìš”. ì´ ì‚¬íƒ•ì€ ëˆˆ ìœ„ì— ë§Œë“¤ì–´ìš”. ì¡°ê¸ˆ ì¶¥ì§€ë§Œ ì•„ì£¼ ì¬ë¯¸ìˆê³  ì‚¬íƒ•ë„ ë§›ìˆì–´ìš”. ê·¸ë˜ì„œ ìºë‚˜ë‹¤ ì‚¬ëŒë“¤ì€ ë©”ì´í”Œ íƒœí”¼ë¥¼ ì•„ì£¼ ì¢‹ì•„í•´ìš”.", questionText: "ì´ ê¸€ì˜ ë‹ˆì½œ ì”¨ëŠ” í˜¸ë–¡ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.", options: ["O", "X"], answer: "O" },
            { number: 20, type: 'passage_ox', title: "ê¸€ì„ ì½ê³  ë§ìœ¼ë©´ O, í‹€ë¦¬ë©´ X í•˜ì„¸ìš”.", passage: "ì €ëŠ” ë‹ˆì½œì´ì—ìš”. ìºë‚˜ë‹¤ì—ì„œ ì™”ì–´ìš”. ì €ëŠ” í•œêµ­ì—ì„œ ì˜ì–´ë¥¼ ê°€ë¥´ì³ìš”. ì§€ê¸ˆ í•œêµ­ì€ ê²¨ìš¸ì´ì—ìš”. ë‚ ì”¨ê°€ ì•„ì£¼ ì¶”ì›Œìš”. ì €ëŠ” ì§€ë‚œê²¨ìš¸ì— í•œêµ­ì—ì„œ í˜¸ë–¡ì„ ì²˜ìŒ ë¨¹ì—ˆì–´ìš”. í˜¸ë–¡ì€ ë”°ëœ»í•˜ê³  ë§›ìˆì–´ìš”. ê·¸ë˜ì„œ ìš”ì¦˜ ì €ëŠ” ë§¤ì¼ í˜¸ë–¡ì„ ë¨¹ì–´ìš”. ìºë‚˜ë‹¤ ê²¨ìš¸ë„ ì¶¥ê³  ëˆˆì´ ë§ì´ ì™€ìš”. ìºë‚˜ë‹¤ ì‚¬ëŒë“¤ì€ ê²¨ìš¸ì— ì•„ì´ë“¤ê³¼ ê°™ì´ ë©”ì´í”Œ íƒœí”¼ë¥¼ ë§Œë“¤ì–´ìš”. ì´ ì‚¬íƒ•ì€ ëˆˆ ìœ„ì— ë§Œë“¤ì–´ìš”. ì¡°ê¸ˆ ì¶¥ì§€ë§Œ ì•„ì£¼ ì¬ë¯¸ìˆê³  ì‚¬íƒ•ë„ ë§›ìˆì–´ìš”. ê·¸ë˜ì„œ ìºë‚˜ë‹¤ ì‚¬ëŒë“¤ì€ ë©”ì´í”Œ íƒœí”¼ë¥¼ ì•„ì£¼ ì¢‹ì•„í•´ìš”.", questionText: "ë©”ì´í”Œ íƒœí”¼ ì‚¬íƒ•ì€ ë”°ëœ»í•˜ê³  ë§›ìˆìŠµë‹ˆë‹¤.", options: ["O", "X"], answer: "X" },
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const questionTitleEl = document.getElementById('question-title');
        const progressEl = document.getElementById('quiz-progress');
        const questionContentEl = document.getElementById('question-content');
        const feedbackEl = document.getElementById('feedback');
        const scoreEl = document.getElementById('score');
        
        function startQuiz() {
            currentQuestions = [...questions]; // ìˆœì„œ ê³ ì •
            currentQuestionIndex = 0;
            score = 0;
            showScreen('quiz-screen');
            loadNextQuestion();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.quiz-screen').forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function loadNextQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                showEndScreen();
                return;
            }
            isAnswered = false;
            feedbackEl.innerHTML = '';
            questionContentEl.innerHTML = '';
            
            const q = currentQuestions[currentQuestionIndex];
            questionTitleEl.innerHTML = `<span class="text-slate-500 font-medium mr-2">${q.number}.</span> ${q.title}`;
            progressEl.textContent = `${currentQuestionIndex + 1} / ${currentQuestions.length}`;

            switch(q.type) {
                case 'emoji': loadEmojiQuestion(q); break;
                case 'choice': loadChoiceQuestion(q); break;
                case 'scramble': loadScrambleQuestion(q); break;
                case 'connector': loadConnectorQuestion(q); break;
                case 'passage_choice':
                case 'passage_ox':
                    loadPassageQuestion(q);
                    break;
            }
        }
        
        function loadEmojiQuestion(q) {
            questionContentEl.innerHTML = `
                <p class="text-center text-2xl font-bold mb-6">${q.keyword}</p>
                <div id="options" class="grid grid-cols-2 gap-4"></div>
            `;
            const optionsContainer = document.getElementById('options');
            q.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-btn emoji-option';
                button.textContent = option;
                button.onclick = () => checkAnswer(button, option);
                optionsContainer.appendChild(button);
            });
        }
        
        function loadChoiceQuestion(q) {
             questionContentEl.innerHTML = `
                <div class="bg-slate-50 p-4 rounded-lg mb-6 text-center text-xl min-h-[5rem] flex items-center justify-center">${q.questionText}</div>
                <div id="options" class="space-y-3"></div>
            `;
            const optionsContainer = document.getElementById('options');
            q.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option;
                button.onclick = () => checkAnswer(button, option);
                optionsContainer.appendChild(button);
            });
        }
        
        function loadConnectorQuestion(q) {
            questionContentEl.innerHTML = `
                <div class="bg-slate-50 p-4 rounded-lg mb-6 text-center text-xl space-y-2">
                    <p>${q.sentences[0]}</p>
                    <p>${q.sentences[1]}</p>
                </div>
                <div id="options" class="grid grid-cols-2 gap-4"></div>
            `;
            const optionsContainer = document.getElementById('options');
            q.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option;
                button.onclick = () => checkAnswer(button, option);
                optionsContainer.appendChild(button);
            });
        }

        function loadScrambleQuestion(q) {
             questionContentEl.innerHTML = `
                <div id="scramble-answer-box" class="bg-slate-50 p-3 rounded-lg mb-4 border-2 border-slate-300 flex flex-wrap gap-2 items-center justify-center"></div>
                <div id="scramble-words-box" class="p-4 rounded-lg flex flex-wrap gap-3 items-center justify-center"></div>
                <div class="mt-6 text-center">
                    <button id="scramble-submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg shadow-md">í™•ì¸</button>
                </div>
            `;
            const answerBox = document.getElementById('scramble-answer-box');
            const wordsBox = document.getElementById('scramble-words-box');
            let currentAnswer = [];

            const moveWord = (wordEl, part) => {
                if (answerBox.contains(wordEl)) {
                    // Move from answer to words
                    currentAnswer = currentAnswer.filter(p => p !== part);
                    wordsBox.appendChild(wordEl);
                } else {
                    // Move from words to answer
                    currentAnswer.push(part);
                    answerBox.appendChild(wordEl);
                }
            };
            
            [...q.parts].sort(()=>Math.random()-0.5).forEach(part => {
                const wordEl = document.createElement('button');
                wordEl.textContent = part;
                wordEl.className = "scramble-word p-2 px-4 border-2 rounded-lg text-lg font-semibold bg-white shadow-sm";
                wordEl.onclick = () => moveWord(wordEl, part);
                wordsBox.appendChild(wordEl);
            });

            document.getElementById('scramble-submit').onclick = () => {
                const userAnswer = Array.from(answerBox.children).map(el => el.textContent).join(' ');
                checkAnswer(null, userAnswer);
            };
        }
        
        function loadPassageQuestion(q) {
            let optionsHTML = '';
            if (q.type === 'passage_choice') {
                optionsHTML = `<div id="options" class="space-y-3"></div>`;
            } else { // passage_ox
                optionsHTML = `<div id="options" class="grid grid-cols-2 gap-4"></div>`;
            }

            // For questions that share a passage, only show the question text part
            const passageHTML = (q.number === 18 || q.number === 20) ? '' : `<div class="bg-slate-50 p-4 rounded-lg mb-6 text-left text-base leading-relaxed max-h-48 overflow-y-auto">${q.passage.replace(/\n/g, '<br>')}</div>`;

            questionContentEl.innerHTML = `
                ${passageHTML}
                <div class="bg-blue-50 p-4 rounded-lg mb-6 text-center text-xl">${q.questionText}</div>
                ${optionsHTML}
            `;
            
            const optionsContainer = document.getElementById('options');
            q.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                if (q.type === 'passage_ox') {
                    button.classList.add('text-3xl', 'font-bold');
                }
                button.textContent = option;
                button.onclick = () => checkAnswer(button, option);
                optionsContainer.appendChild(button);
            });
        }


        function checkAnswer(selectedButton, answer) {
            if (isAnswered) return;
            isAnswered = true;
            
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
            document.querySelectorAll('#question-content button').forEach(b => b.disabled = true);

            const q = currentQuestions[currentQuestionIndex];
            const isCorrect = answer === q.answer;
            if (isCorrect) score++;

            showFeedbackAndNextButton(isCorrect, q);
        }

        function showFeedbackAndNextButton(isCorrect, q) {
            let correctText = `ì •ë‹µ! ğŸ‰`;
            let incorrectText = `ì˜¤ë‹µ! ì •ë‹µì€ '${q.answer}'ì…ë‹ˆë‹¤.`;
            
            if (q.type === 'connector' && isCorrect) {
                correctText += `<br><span class="text-base font-normal text-slate-600">${q.result}</span>`;
            }

            feedbackEl.innerHTML = isCorrect 
                ? `<p class="font-bold text-green-500">${correctText}</p>`
                : `<p class="font-bold text-red-500">${incorrectText}</p>`;

            const nextButton = document.createElement('button');
            nextButton.textContent = 'ë‹¤ìŒ ë¬¸ì œ â†’';
            nextButton.className = "mt-4 bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-5 rounded-lg";
            nextButton.onclick = () => {
                currentQuestionIndex++;
                loadNextQuestion();
            };
            feedbackEl.appendChild(nextButton);
        }

        function showEndScreen() {
            const percentage = Math.round((score / currentQuestions.length) * 100);
            scoreEl.textContent = `${percentage}%`;
            showScreen('end-screen');
        }
    </script>
</body>
</html>

